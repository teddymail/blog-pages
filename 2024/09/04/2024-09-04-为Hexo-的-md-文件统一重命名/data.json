{"title":"为Hexo 的 md 文件统一重命名","date":"2024-09-04T05:55:14.000Z","source":"_posts/2024-09-04.为Hexo 的 md 文件统一重命名.md","raw":"---\ntitle: 为Hexo 的 md 文件统一重命名\ndate: 2024-09-04 13:55:14\ntags: [shell, hexo, rename]\n---\n\n换用 Hexo 之后发现 _post 目录里面乱乱的，比如从 WordPress 中导入的中文标题文章的文件名会变成乱乱的字符串，看着很难受。所以搞了个改名的脚本来重命名文件。\n\n重命名之后的格式为 PO文日期.文章标题.md，如果文件内有注明 urlname 的话就是 PO文日期.文章标题.urlname.md。\n\n```shell\n#!/bin/bash\n\n#保存系统默认的 IFS\nSAVEIFS=$IFS\n\n#更改 IFS 为换行（用于处理文件名含有空格的文件\nIFS=$'\\n'\n\nfor filename in *.md; do\n  #标题（不想替换空格的话就删除“s/ /_/g”。\n  title=$(grep \"title: \" $filename | head -1 | sed -e 's/title: //g; s#/##g;s/ /_/g')\n  #发文日期\n  date=$(grep \"date: \" $filename | awk 'NR==1{printf $2}' )\n  #urlname\n  link=$(grep \"urlname: \" $filename | head -1 | sed 's/urlname: //g' )\n  #新文件名\n  if [ -z \"$link\" ]; then\n    newname=\"$date.$title.md\"\n    else\n    newname=\"$date.$title.$link.md\"\n  fi\n  #过滤掉名字正确的\n  if [ \"$filename\" != \"$newname\" ]; then\n     #开始改名\n     echo \"Rename $filename to $newname\"\n     mv $filename $newname\n  fi\ndone\n\necho done!\n\n```\n展示效果:\n\n![展示效果](https://img.yuekang.org.cn/2024-09-04%2014-01-13.png)\n\n这样就舒服好多了。\n\n","slug":"2024-09-04-为Hexo-的-md-文件统一重命名","published":true,"updated":"2024-09-04T06:09:41.094Z","_id":"cm0ozs0d5002zkgsn4v4lfvzs","comments":true,"layout":"post","photos":[],"html":"<p>换用 Hexo 之后发现 _post 目录里面乱乱的，比如从 WordPress 中导入的中文标题文章的文件名会变成乱乱的字符串，看着很难受。所以搞了个改名的脚本来重命名文件。</p>\n<p>重命名之后的格式为 PO文日期.文章标题.md，如果文件内有注明 urlname 的话就是 PO文日期.文章标题.urlname.md。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">!/bin/bash</span></span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">保存系统默认的 IFS</span></span><br><span class=\"line\">SAVEIFS=$IFS</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">更改 IFS 为换行（用于处理文件名含有空格的文件</span></span><br><span class=\"line\">IFS=$&#x27;\\n&#x27;</span><br><span class=\"line\"></span><br><span class=\"line\">for filename in *.md; do</span><br><span class=\"line\"><span class=\"meta prompt_\">  #</span><span class=\"language-bash\">标题（不想替换空格的话就删除“s/ /_/g”。</span></span><br><span class=\"line\">  title=$(grep &quot;title: &quot; $filename | head -1 | sed -e &#x27;s/title: //g; s#/##g;s/ /_/g&#x27;)</span><br><span class=\"line\"><span class=\"meta prompt_\">  #</span><span class=\"language-bash\">发文日期</span></span><br><span class=\"line\">  date=$(grep &quot;date: &quot; $filename | awk &#x27;NR==1&#123;printf $2&#125;&#x27; )</span><br><span class=\"line\"><span class=\"meta prompt_\">  #</span><span class=\"language-bash\">urlname</span></span><br><span class=\"line\">  link=$(grep &quot;urlname: &quot; $filename | head -1 | sed &#x27;s/urlname: //g&#x27; )</span><br><span class=\"line\"><span class=\"meta prompt_\">  #</span><span class=\"language-bash\">新文件名</span></span><br><span class=\"line\">  if [ -z &quot;$link&quot; ]; then</span><br><span class=\"line\">    newname=&quot;$date.$title.md&quot;</span><br><span class=\"line\">    else</span><br><span class=\"line\">    newname=&quot;$date.$title.$link.md&quot;</span><br><span class=\"line\">  fi</span><br><span class=\"line\"><span class=\"meta prompt_\">  #</span><span class=\"language-bash\">过滤掉名字正确的</span></span><br><span class=\"line\">  if [ &quot;$filename&quot; != &quot;$newname&quot; ]; then</span><br><span class=\"line\">     #开始改名</span><br><span class=\"line\">     echo &quot;Rename $filename to $newname&quot;</span><br><span class=\"line\">     mv $filename $newname</span><br><span class=\"line\">  fi</span><br><span class=\"line\">done</span><br><span class=\"line\"></span><br><span class=\"line\">echo done!</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>展示效果:</p>\n<p><img src=\"https://img.yuekang.org.cn/2024-09-04%2014-01-13.png\" alt=\"展示效果\"></p>\n<p>这样就舒服好多了。</p>\n","excerpt":"","more":"<p>换用 Hexo 之后发现 _post 目录里面乱乱的，比如从 WordPress 中导入的中文标题文章的文件名会变成乱乱的字符串，看着很难受。所以搞了个改名的脚本来重命名文件。</p>\n<p>重命名之后的格式为 PO文日期.文章标题.md，如果文件内有注明 urlname 的话就是 PO文日期.文章标题.urlname.md。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">!/bin/bash</span></span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">保存系统默认的 IFS</span></span><br><span class=\"line\">SAVEIFS=$IFS</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">更改 IFS 为换行（用于处理文件名含有空格的文件</span></span><br><span class=\"line\">IFS=$&#x27;\\n&#x27;</span><br><span class=\"line\"></span><br><span class=\"line\">for filename in *.md; do</span><br><span class=\"line\"><span class=\"meta prompt_\">  #</span><span class=\"language-bash\">标题（不想替换空格的话就删除“s/ /_/g”。</span></span><br><span class=\"line\">  title=$(grep &quot;title: &quot; $filename | head -1 | sed -e &#x27;s/title: //g; s#/##g;s/ /_/g&#x27;)</span><br><span class=\"line\"><span class=\"meta prompt_\">  #</span><span class=\"language-bash\">发文日期</span></span><br><span class=\"line\">  date=$(grep &quot;date: &quot; $filename | awk &#x27;NR==1&#123;printf $2&#125;&#x27; )</span><br><span class=\"line\"><span class=\"meta prompt_\">  #</span><span class=\"language-bash\">urlname</span></span><br><span class=\"line\">  link=$(grep &quot;urlname: &quot; $filename | head -1 | sed &#x27;s/urlname: //g&#x27; )</span><br><span class=\"line\"><span class=\"meta prompt_\">  #</span><span class=\"language-bash\">新文件名</span></span><br><span class=\"line\">  if [ -z &quot;$link&quot; ]; then</span><br><span class=\"line\">    newname=&quot;$date.$title.md&quot;</span><br><span class=\"line\">    else</span><br><span class=\"line\">    newname=&quot;$date.$title.$link.md&quot;</span><br><span class=\"line\">  fi</span><br><span class=\"line\"><span class=\"meta prompt_\">  #</span><span class=\"language-bash\">过滤掉名字正确的</span></span><br><span class=\"line\">  if [ &quot;$filename&quot; != &quot;$newname&quot; ]; then</span><br><span class=\"line\">     #开始改名</span><br><span class=\"line\">     echo &quot;Rename $filename to $newname&quot;</span><br><span class=\"line\">     mv $filename $newname</span><br><span class=\"line\">  fi</span><br><span class=\"line\">done</span><br><span class=\"line\"></span><br><span class=\"line\">echo done!</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>展示效果:</p>\n<p><img src=\"https://img.yuekang.org.cn/2024-09-04%2014-01-13.png\" alt=\"展示效果\"></p>\n<p>这样就舒服好多了。</p>\n","path":"2024/09/04/2024-09-04-为Hexo-的-md-文件统一重命名/","permalink":"https://yuekang.org.cn/2024/09/04/2024-09-04-%E4%B8%BAHexo-%E7%9A%84-md-%E6%96%87%E4%BB%B6%E7%BB%9F%E4%B8%80%E9%87%8D%E5%91%BD%E5%90%8D/","tags":[{"name":"shell","_id":"cm0ozs0dc004tkgsnarjr6kpi","slug":"shell","path":"tags/shell/","permalink":"https://yuekang.org.cn/tags/shell/","length":2},{"name":"hexo","_id":"cm0ozs0dn007zkgsn8vln46oa","slug":"hexo","path":"tags/hexo/","permalink":"https://yuekang.org.cn/tags/hexo/","length":1},{"name":"rename","_id":"cm0ozs0dn0081kgsnhxir95vc","slug":"rename","path":"tags/rename/","permalink":"https://yuekang.org.cn/tags/rename/","length":1}],"categories":[],"prev":null,"next":{"title":"搭建ES服务","date":"2020-01-03T17:56:51.000Z","slug":"2020-01-04-搭建ES服务","published":true,"updated":"2024-09-02T09:06:11.434Z","_id":"cm0ozs0d5002wkgsn6e3dcawd","layout":"post","photos":[],"excerpt":"","path":"2020/01/04/2020-01-04-搭建ES服务/","permalink":"https://yuekang.org.cn/2020/01/04/2020-01-04-%E6%90%AD%E5%BB%BAES%E6%9C%8D%E5%8A%A1/","__post":true},"__post":true}