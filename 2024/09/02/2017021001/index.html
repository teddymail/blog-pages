<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="Yue Kang,ykcode@163.com"><title>安卓内容提供者的使用和内容接收的接收 · 少年当自强</title><meta name="description" content="一、整体实现步骤1. 新建布局文件
2. 建立实体类
3. 建立MySqliteOpenHelpter来帮助我们管理数据库
4. 建立数据库适配器，执行具体的CURD操作
5. 建立内容提供者
6. 在第二个应用中调用第一个应用中的内容（这里没有提到权限的事情）

1.新建布局文件
效果
   

"><meta name="keywords" content="HTML,JAVA,CSS,安卓,Android,Linux"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/images/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"><meta name="generator" content="Hexo 7.3.0"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/images/logo@2x.png" style="width:127px;"><h3 title=""><a href="/">少年当自强</a></h3><div class="description"><p>Write the code. Change the World.</p></div></div></div><ul class="social-links"><li><a href="http://weibo.com/teddymail"><i class="fa fa-weibo"></i></a></li><li><a href="http://github.com/teddymail"><i class="fa fa-github"></i></a></li></ul><div class="footer"><a target="_blank" href="/"><span>Copyright &copy; Teddy All rights reserved.</span></a><div class="by_farbox"></div><div class="by_farbox"><script src="/js/jquery.js"></script><script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cspan id='cnzz_stat_icon_1261418356'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s11.cnzz.com/stat.php%3Fid%3D1261418356%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E"));</script></div></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">Home</a></li><li><a href="/about">Sobre</a></li><li><a href="/archives">Arquivo</a></li><li><a href="/links">Links</a></li></div><div class="information"><div class="back_btn"><li><a class="fa fa-chevron-left" onclick="window.history.go(-1)"> </a></li></div><div class="avatar"><img src="http://img.yuekang.org.cn/me.jpg"></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>安卓内容提供者的使用和内容接收的接收</a></h3></div><div class="post-content"><h1 id="一、整体实现步骤"><a href="#一、整体实现步骤" class="headerlink" title="一、整体实现步骤"></a>一、整体实现步骤</h1><pre><code>1. 新建布局文件
2. 建立实体类
3. 建立MySqliteOpenHelpter来帮助我们管理数据库
4. 建立数据库适配器，执行具体的CURD操作
5. 建立内容提供者
6. 在第二个应用中调用第一个应用中的内容（这里没有提到权限的事情）
</code></pre>
<h3 id="1-新建布局文件"><a href="#1-新建布局文件" class="headerlink" title="1.新建布局文件"></a>1.新建布局文件</h3><ol>
<li><p>效果</p>
<p>   <img src="http://img.yuekang.org.cn/202409031658.webp" alt="布局文件效果"></p>
</li>
<li><p>布局代码：</p>
</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/activity_main&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:paddingBottom</span>=<span class="string">&quot;@dimen/activity_vertical_margin&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:paddingLeft</span>=<span class="string">&quot;@dimen/activity_horizontal_margin&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:paddingRight</span>=<span class="string">&quot;@dimen/activity_horizontal_margin&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:paddingTop</span>=<span class="string">&quot;@dimen/activity_vertical_margin&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;cn.jewei.app.privader.MainActivity&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:onClick</span>=<span class="string">&quot;insert&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;增加一条数据&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:onClick</span>=<span class="string">&quot;update&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;修改一条数据&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:onClick</span>=<span class="string">&quot;delete&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;删除一条数据&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:onClick</span>=<span class="string">&quot;find&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;查询单个&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:onClick</span>=<span class="string">&quot;findAll&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;查询所有&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:onClick</span>=<span class="string">&quot;createTable&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;创建数据表&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:onClick</span>=<span class="string">&quot;dropTable&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;删除数据表&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>


<h2 id="2-在Activity中先把事件给写上回头再写全"><a href="#2-在Activity中先把事件给写上回头再写全" class="headerlink" title="2.在Activity中先把事件给写上回头再写全"></a>2.在Activity中先把事件给写上回头再写全</h2><hr>
<ol>
<li><strong>代码</strong></li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainActivity</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.privder_main);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//增加数据</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insert</span><span class="params">(View v)</span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//修改一条数据</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(View v)</span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//删除一条数据</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(View v)</span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//查询单个</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">find</span><span class="params">(View v)</span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//查询所有</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">findAll</span><span class="params">(View v)</span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//创建数据表</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">createTable</span><span class="params">(View v)</span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//删除数据表</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">dropTable</span><span class="params">(View v)</span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="3-建立一个员工实体类"><a href="#3-建立一个员工实体类" class="headerlink" title="3. 建立一个员工实体类"></a>3. 建立一个员工实体类</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Emp</span> &#123;</span><br><span class="line">    <span class="comment">//id号</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="comment">//员工姓名</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//员工年龄</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Emp</span><span class="params">()</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Emp</span><span class="params">(<span class="type">int</span> id, String name, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Emp&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;id=&quot;</span> + id +</span><br><span class="line">                <span class="string">&quot;, name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, age=&quot;</span> + age +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>员工实体类讲解</p>
</blockquote>
<ol>
<li>我这里主要包含三个属性（可以自由发挥）<ol>
<li>员工编号</li>
<li>员工姓名</li>
<li>员工年龄</li>
</ol>
</li>
<li>实体类可以自己定义，只要符合业务需求即可</li>
</ol>
<hr>
<h2 id="4-MySQLiteOpenHelper（名字有点Low-haha-）"><a href="#4-MySQLiteOpenHelper（名字有点Low-haha-）" class="headerlink" title="4. MySQLiteOpenHelper（名字有点Low~ haha~）"></a>4. MySQLiteOpenHelper（名字有点Low~ haha~）</h2><hr>
<ol>
<li>代码</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyDatabaseHelper</span> <span class="keyword">extends</span> <span class="title class_">SQLiteOpenHelper</span> &#123;</span><br><span class="line">    <span class="comment">//定义数据表</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">TAB_NAME</span> <span class="operator">=</span><span class="string">&quot;emp.db&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//定义列</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">NAME</span> <span class="operator">=</span> <span class="string">&quot;name&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">AGE</span> <span class="operator">=</span> <span class="string">&quot;age&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//定义建表语句</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String CREATE_EMP=<span class="string">&quot;CREATE TABLE emp(&quot;</span> +</span><br><span class="line">                                            <span class="string">&quot;id PRIMARY KEY AUTOINCREMENT,&quot;</span> +</span><br><span class="line">                                            <span class="string">&quot;name VARCHAR(20) NOT NULL,&quot;</span> +</span><br><span class="line">                                            <span class="string">&quot;age INT)&quot;</span>;</span><br><span class="line">    <span class="comment">//定义数据库版本</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">version</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyDatabaseHelper</span><span class="params">(Context context)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(context, TAB_NAME, <span class="literal">null</span>, version, <span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//当没有表的时候执行此方法</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(SQLiteDatabase db)</span> &#123;</span><br><span class="line">        <span class="comment">//写入建表语句</span></span><br><span class="line">        db.execSQL(CREATE_EMP);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//当数据库版本不对的时候调用此方法。</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onUpgrade</span><span class="params">(SQLiteDatabase db, <span class="type">int</span> oldVersion, <span class="type">int</span> newVersion)</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<blockquote>
<p>SQLiteOpenHelper 管理数据库创建和版本管理的辅助类.。</p>
<ol>
<li>SQLiteOpenHelper 是一个<strong>抽象类</strong>，想要使用它的话，就需要创建一个自己的帮助类去继承它。并复写两个抽象方法<br> 1.1 **onCreate()**：创建时执行，已经存在不执行。<br> 1.2 **onUpgrade()**：版本号不同时执行</li>
<li>两个重要的实例方法 <br>  2.1 **getReadableDatabase() **<br>  2.2 **getWritableDatabase()**。<ul>
<li>这两个方法都可以<strong>创建或打开</strong>一个现有的数据库（如果数据库已存在则直接打开，否则创建一个新的数据库）。</li>
<li>并返回一个可对数据库进行读写操作的对象。</li>
<li>不同处。当数据库不可写入时（如磁盘空间已满）getReadableDatabase() 方法返回的对象将以只读的方式去打开数据库，而 getWritableDatabase() 方法则将出现异常。</li>
</ul>
</li>
<li>创建数据库的步骤<br>  构建出** SQLiteOpenHelper 实例<strong>。<br>再调用它的 <strong>getReadableDatabase()</strong> 或</strong> getWritableDatabase() **方法就能够创建数据库了。<br>数据库文件会存放在 **&#x2F;data&#x2F;data&#x2F;<package name>&#x2F;databases&#x2F; <strong>目录下。<br>此时，重写的</strong> onCreate() **方法也会得到执行</li>
</ol>
</blockquote>
<blockquote>
<ol start="4">
<li>官方文档：<a href="https://developer.android.google.cn/reference/android/database/sqlite/SQLiteOpenHelper.html">SQLiteOpenHelper</a></li>
</ol>
</blockquote>
<h3 id="5-定义数据适配器"><a href="#5-定义数据适配器" class="headerlink" title="5.定义数据适配器"></a>5.定义数据适配器</h3><p>1.代码：<br>  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DatabaseAdapter</span> &#123;</span><br><span class="line">    <span class="comment">//持有一个帮助类</span></span><br><span class="line">    MyDatabaseHelper helper;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">DatabaseAdapter</span><span class="params">(Context context)</span> &#123;</span><br><span class="line">        helper = <span class="keyword">new</span> <span class="title class_">MyDatabaseHelper</span>(context);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//具体的添加操作</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insert</span><span class="params">(Emp emp)</span>&#123;</span><br><span class="line">        <span class="comment">//获取写数据库的权限</span></span><br><span class="line">        <span class="type">SQLiteDatabase</span> <span class="variable">db</span> <span class="operator">=</span>helper.getWritableDatabase();</span><br><span class="line"></span><br><span class="line">        <span class="type">ContentValues</span> <span class="variable">values</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ContentValues</span>();</span><br><span class="line">        values.put(MyDatabaseHelper.NAME,emp.getName());</span><br><span class="line">        values.put(MyDatabaseHelper.AGE,emp.getAge());</span><br><span class="line">        <span class="comment">//插入操作</span></span><br><span class="line">        db.insert(MyDatabaseHelper.TAB_NAME,<span class="literal">null</span>,values);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//具体的修改操作</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(Emp emp)</span>&#123;</span><br><span class="line">        <span class="comment">//获取写数据的权限</span></span><br><span class="line">        <span class="type">SQLiteDatabase</span> <span class="variable">db</span> <span class="operator">=</span> helper.getWritableDatabase();</span><br><span class="line">        <span class="comment">//修改的条件</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">whereClause</span> <span class="operator">=</span> <span class="string">&quot;id=?&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//修改的条件参数</span></span><br><span class="line">        String[] whereArgs = <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;1&quot;</span>&#125;;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//修改的内容</span></span><br><span class="line">        <span class="type">ContentValues</span> <span class="variable">values</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ContentValues</span>();</span><br><span class="line">        values.put(MyDatabaseHelper.ID,emp.getId());</span><br><span class="line">        values.put(MyDatabaseHelper.NAME,emp.getName());</span><br><span class="line">        values.put(MyDatabaseHelper.AGE,emp.getAge());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//修改操作</span></span><br><span class="line">        db.update(MyDatabaseHelper.TAB_NAME,values,whereClause,whereArgs);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//具体的删除操作</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(<span class="type">int</span> id)</span>&#123;</span><br><span class="line">        <span class="comment">//获取写数据的权限</span></span><br><span class="line">        <span class="type">SQLiteDatabase</span> <span class="variable">db</span> <span class="operator">=</span> helper.getWritableDatabase();</span><br><span class="line">        <span class="type">String</span> <span class="variable">whereClause</span> <span class="operator">=</span> <span class="string">&quot;id=?&quot;</span>;</span><br><span class="line">        String[] whereArgs = <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;String.valueOf(id)&#125;;</span><br><span class="line">        db.delete(MyDatabaseHelper.TAB_NAME,whereClause,whereArgs);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//具体的查询单个操作</span></span><br><span class="line">    <span class="keyword">public</span> Emp <span class="title function_">find</span><span class="params">(<span class="type">int</span> id)</span>&#123;</span><br><span class="line">        <span class="comment">//创建实体类对象</span></span><br><span class="line">        <span class="type">Emp</span> <span class="variable">emp</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="comment">//获取查询数据的权限</span></span><br><span class="line">        <span class="type">SQLiteDatabase</span> <span class="variable">db</span> <span class="operator">=</span> helper.getReadableDatabase();</span><br><span class="line">        String[] columns = <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;MyDatabaseHelper.ID,MyDatabaseHelper.NAME,MyDatabaseHelper.AGE&#125;;</span><br><span class="line">        <span class="type">String</span> <span class="variable">selection</span> <span class="operator">=</span> <span class="string">&quot;id=?&quot;</span>;</span><br><span class="line">        String[] selectionArgs = <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;String.valueOf(id)&#125;;</span><br><span class="line">        <span class="type">Cursor</span> <span class="variable">result</span> <span class="operator">=</span> db.query(MyDatabaseHelper.TAB_NAME,columns,selection,selectionArgs,<span class="literal">null</span>,<span class="literal">null</span>,<span class="literal">null</span>);</span><br><span class="line">        <span class="comment">//循环取值</span></span><br><span class="line">        <span class="keyword">if</span> (result.moveToFirst())&#123;</span><br><span class="line">            emp = <span class="keyword">new</span> <span class="title class_">Emp</span>();</span><br><span class="line">            emp.setId(result.getInt(<span class="number">0</span>));</span><br><span class="line">            emp.setName(result.getString(<span class="number">1</span>));</span><br><span class="line">            emp.setAge(result.getInt(<span class="number">2</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        result.close();</span><br><span class="line">        <span class="keyword">return</span> emp;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//具体的查询所有操作</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Emp&gt; <span class="title function_">findAll</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//创建list集合</span></span><br><span class="line">        List&lt;Emp&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">//获取读取数据库的权限</span></span><br><span class="line">        <span class="type">SQLiteDatabase</span> <span class="variable">db</span> <span class="operator">=</span> helper.getReadableDatabase();</span><br><span class="line">        String[] columns = <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;MyDatabaseHelper.ID,MyDatabaseHelper.NAME,MyDatabaseHelper.AGE&#125;;</span><br><span class="line">        <span class="type">Cursor</span> <span class="variable">res</span> <span class="operator">=</span> db.query(MyDatabaseHelper.TAB_NAME,columns,<span class="string">&quot;&quot;</span>,<span class="keyword">new</span> <span class="title class_">String</span>[]&#123;&#125;,<span class="literal">null</span>,<span class="literal">null</span>,<span class="literal">null</span>);</span><br><span class="line">        <span class="keyword">while</span> (res.moveToNext())&#123;</span><br><span class="line">            <span class="type">Emp</span> <span class="variable">emp</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Emp</span>();</span><br><span class="line">            emp.setId(res.getInt(<span class="number">0</span>));</span><br><span class="line">            emp.setName(res.getString(<span class="number">1</span>));</span><br><span class="line">            emp.setAge(res.getInt(<span class="number">2</span>));</span><br><span class="line">            list.add(emp);</span><br><span class="line">        &#125;</span><br><span class="line">        res.close();</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//具体的删表操作</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">dropTable</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//获取写数据的权限</span></span><br><span class="line">        <span class="type">SQLiteDatabase</span> <span class="variable">db</span> <span class="operator">=</span> helper.getWritableDatabase();</span><br><span class="line">        db.execSQL(MyDatabaseHelper.DROP_EMP);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//具体的建表操作</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">createTable</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//获取写数据的权限</span></span><br><span class="line">        <span class="type">SQLiteDatabase</span> <span class="variable">db</span> <span class="operator">=</span> helper.getWritableDatabase();</span><br><span class="line">        db.execSQL(MyDatabaseHelper.CREATE_EMP);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>讲解<br>  此适配器主要是帮我们具体的实现具体的业务操作而写的，我这里只是练习，未来你需要根据具体的业务去实现</p>
</blockquote>
<p>##最后完成这样的效果</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648105-f96010dc545a4bb4.gif?imageMogr2/auto-orient/strip" alt="效果图"></p>
<h2 id="开始写内容提供者"><a href="#开始写内容提供者" class="headerlink" title="开始写内容提供者"></a>开始写内容提供者</h2><hr>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 内容提供者练习</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyContentProvider</span> <span class="keyword">extends</span> <span class="title class_">ContentProvider</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//定义一个URI匹配器</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">UriMatcher</span> <span class="variable">matcher</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UriMatcher</span>(UriMatcher.NO_MATCH);</span><br><span class="line">    <span class="comment">//定义常量</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">INSERT</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">DELETE</span> <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">UPDATE</span> <span class="operator">=</span> <span class="number">3</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">QUERYBYID</span> <span class="operator">=</span> <span class="number">4</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">QUERY</span> <span class="operator">=</span> <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//持有引用</span></span><br><span class="line">    MyDatabaseHelper helper;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="comment">//匹配的内容： content://cn.jewei.provider.emp/insert</span></span><br><span class="line">        matcher.addURI(<span class="string">&quot;cn.jewei.provider.emp&quot;</span>,<span class="string">&quot;insert&quot;</span>,INSERT);</span><br><span class="line">        <span class="comment">//匹配的内容： content://cn.jewei.provider.emp/delete</span></span><br><span class="line">        matcher.addURI(<span class="string">&quot;cn.jewei.provider.emp&quot;</span>,<span class="string">&quot;delete&quot;</span>,DELETE);</span><br><span class="line">        <span class="comment">//匹配的内容： content://cn.jewei.provider.emp/update</span></span><br><span class="line">        matcher.addURI(<span class="string">&quot;cn.jewei.provider.emp&quot;</span>,<span class="string">&quot;update&quot;</span>,UPDATE);</span><br><span class="line">        <span class="comment">//匹配的内容： content://cn.jewei.provider.emp/query/5后面是数字的这种</span></span><br><span class="line">        matcher.addURI(<span class="string">&quot;cn.jewei.provider.emp&quot;</span>,<span class="string">&quot;query/#&quot;</span>,QUERYBYID);</span><br><span class="line">        <span class="comment">//匹配的内容： content://cn.jewei.provider.emp/query</span></span><br><span class="line">        matcher.addURI(<span class="string">&quot;cn.jewei.provider.emp&quot;</span>,<span class="string">&quot;query&quot;</span>,QUERY);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyContentProvider</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//启动的时候就会执行</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">onCreate</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//初始化帮助类</span></span><br><span class="line">        helper = <span class="keyword">new</span> <span class="title class_">MyDatabaseHelper</span>(getContext());</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//增加数据的操作</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Uri <span class="title function_">insert</span><span class="params">(Uri uri, ContentValues values)</span> &#123;</span><br><span class="line">        <span class="comment">//首先匹配URI</span></span><br><span class="line">        <span class="keyword">if</span> (matcher.match(uri) == INSERT)&#123;<span class="comment">//匹配上就返回INSERT的值</span></span><br><span class="line">            <span class="type">SQLiteDatabase</span> <span class="variable">db</span> <span class="operator">=</span> helper.getWritableDatabase();</span><br><span class="line">            <span class="comment">//执行插入操作</span></span><br><span class="line">            db.insertOrThrow(MyDatabaseHelper.TAB_NAME,<span class="literal">null</span>,values);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> uri;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//删除操作</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">delete</span><span class="params">(Uri uri, String selection, String[] selectionArgs)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (matcher.match(uri) == DELETE)&#123;</span><br><span class="line">            <span class="type">SQLiteDatabase</span> <span class="variable">db</span> <span class="operator">=</span> helper.getWritableDatabase();</span><br><span class="line">            db.delete(MyDatabaseHelper.TAB_NAME,selection,selectionArgs);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//更新操作</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">update</span><span class="params">(Uri uri, ContentValues values, String selection,</span></span><br><span class="line"><span class="params">                      String[] selectionArgs)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (matcher.match(uri) == UPDATE)&#123;</span><br><span class="line">            <span class="type">SQLiteDatabase</span> <span class="variable">db</span> <span class="operator">=</span> helper.getWritableDatabase();</span><br><span class="line">            db.update(MyDatabaseHelper.TAB_NAME,values,selection,selectionArgs);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//查询操作</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Cursor <span class="title function_">query</span><span class="params">(Uri uri, String[] projection, String selection,</span></span><br><span class="line"><span class="params">                        String[] selectionArgs, String sortOrder)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (matcher.match(uri) == QUERYBYID)&#123;<span class="comment">//查询单个操作</span></span><br><span class="line">            <span class="type">long</span> <span class="variable">id</span> <span class="operator">=</span> ContentUris.parseId(uri);</span><br><span class="line">            <span class="type">SQLiteDatabase</span> <span class="variable">db</span> <span class="operator">=</span> helper.getReadableDatabase();</span><br><span class="line">            <span class="keyword">return</span> db.query(MyDatabaseHelper.TAB_NAME,projection,<span class="string">&quot;id=?&quot;</span>,<span class="keyword">new</span> <span class="title class_">String</span>[]&#123;id+<span class="string">&quot;&quot;</span>&#125;,<span class="literal">null</span>,<span class="literal">null</span>,<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(matcher.match(uri) == QUERY)&#123;<span class="comment">//查询所有</span></span><br><span class="line">            <span class="type">SQLiteDatabase</span> <span class="variable">db</span> <span class="operator">=</span> helper.getReadableDatabase();</span><br><span class="line">            <span class="keyword">return</span> db.query(MyDatabaseHelper.TAB_NAME,projection,<span class="literal">null</span>,<span class="literal">null</span>,<span class="literal">null</span>,<span class="literal">null</span>,<span class="literal">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//主要用于查询是返回单个还是多个</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getType</span><span class="params">(Uri uri)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (matcher.match(uri) == QUERYBYID)&#123;<span class="comment">//查询单个操作</span></span><br><span class="line">            Log.i(<span class="string">&quot;privder&quot;</span>,<span class="string">&quot;查询单个&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;vnd.android.cursor.item/emp&quot;</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(matcher.match(uri) == QUERY)&#123;<span class="comment">//查询所有</span></span><br><span class="line">            Log.i(<span class="string">&quot;privder&quot;</span>,<span class="string">&quot;查询一组&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;vnd.android.cursor.dir/&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>知识点：</p>
</blockquote>
<ul>
<li>Uri(统一资源表示符)<br>   适合不监测网络连接的通信机制<blockquote>
<p><img src="http://upload-images.jianshu.io/upload_images/2648105-d6a2bfdf19a077c2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="URI图例"></p>
</blockquote>
</li>
</ul>
<blockquote>
<ul>
<li>建立内容提供者的目的是提供一种安全的访问形式，就如同防火墙一样，允许可以访问的内容，拒绝一切非法的访问，我们学习内容提供者的目的试了以后能更好的使用系统提供给我们的信息，如果未来你做的应用特别大的时候，里面得数据足够提供一种服务的时候，这个时候内容提供者对你就特别的重要了。</li>
</ul>
</blockquote>
<h2 id="编写另一个应用，模拟查询上一个应用的数据，完成内容提供者的整个流程"><a href="#编写另一个应用，模拟查询上一个应用的数据，完成内容提供者的整个流程" class="headerlink" title="编写另一个应用，模拟查询上一个应用的数据，完成内容提供者的整个流程"></a>编写另一个应用，模拟查询上一个应用的数据，完成内容提供者的整个流程</h2><ol>
<li>废话不多说，布局和上面的一样，这里不再写出<br>  1.1 一张截图：</li>
</ol>
<p><img src="http://upload-images.jianshu.io/upload_images/2648105-f7dbcd16ffef0002.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="接收的界面"></p>
<ol start="2">
<li>我们开始写Activity的内容接收具体代码</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainActivity</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//增加数据</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insert</span><span class="params">(View v)</span>&#123;</span><br><span class="line">        <span class="comment">//创建一个内容接收者</span></span><br><span class="line">        <span class="type">ContentResolver</span> <span class="variable">resolver</span> <span class="operator">=</span> getContentResolver();</span><br><span class="line">        <span class="type">ContentValues</span> <span class="variable">values</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ContentValues</span>();</span><br><span class="line">        values.put(<span class="string">&quot;name&quot;</span>,<span class="string">&quot;张无忌&quot;</span>);</span><br><span class="line">        values.put(<span class="string">&quot;age&quot;</span>,<span class="number">18</span>);</span><br><span class="line">        <span class="type">Uri</span> <span class="variable">uri</span> <span class="operator">=</span> Uri.parse(<span class="string">&quot;content://cn.jewei.provider.emp/insert&quot;</span>);</span><br><span class="line">        resolver.insert(uri,values);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//修改数据</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(View v)</span>&#123;</span><br><span class="line">        <span class="comment">//创建一个内容接收者</span></span><br><span class="line">        <span class="type">ContentResolver</span> <span class="variable">resolver</span> <span class="operator">=</span> getContentResolver();</span><br><span class="line">        <span class="comment">//创建一个ContentValues用于存储数据</span></span><br><span class="line">        <span class="type">ContentValues</span> <span class="variable">values</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ContentValues</span>();</span><br><span class="line">        values.put(<span class="string">&quot;id&quot;</span>,<span class="number">1</span>);</span><br><span class="line">        values.put(<span class="string">&quot;name&quot;</span>,<span class="string">&quot;谢逊&quot;</span>);</span><br><span class="line">        values.put(<span class="string">&quot;age&quot;</span>,<span class="number">84</span>);</span><br><span class="line">        <span class="type">Uri</span> <span class="variable">uri</span> <span class="operator">=</span> Uri.parse(<span class="string">&quot;content://cn.jewei.provider.emp/update&quot;</span>);</span><br><span class="line">        resolver.update(uri,values,<span class="string">&quot;id=?&quot;</span>,<span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;1&quot;</span>&#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//删除数据</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(View v)</span>&#123;</span><br><span class="line">        <span class="comment">//创建一个内容接收者</span></span><br><span class="line">        <span class="type">ContentResolver</span> <span class="variable">resolver</span> <span class="operator">=</span> getContentResolver();</span><br><span class="line">        <span class="comment">//创建uri</span></span><br><span class="line">        <span class="type">Uri</span> <span class="variable">uri</span> <span class="operator">=</span> Uri.parse(<span class="string">&quot;content://cn.jewei.provider.emp/delete&quot;</span>);</span><br><span class="line">        resolver.delete(uri,<span class="string">&quot;id=?&quot;</span>,<span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;1&quot;</span>&#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//查询单个数据</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">find</span><span class="params">(View v)</span>&#123;</span><br><span class="line">        <span class="comment">//创建一个内容接收者</span></span><br><span class="line">        <span class="type">ContentResolver</span> <span class="variable">resolver</span> <span class="operator">=</span> getContentResolver();</span><br><span class="line">        <span class="comment">//创建uri</span></span><br><span class="line">        <span class="type">Uri</span> <span class="variable">uri</span> <span class="operator">=</span> Uri.parse(<span class="string">&quot;content://cn.jewei.provider.emp/query/2&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//定义列</span></span><br><span class="line">        String[] column = <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;id&quot;</span>,<span class="string">&quot;name&quot;</span>,<span class="string">&quot;age&quot;</span>&#125;;</span><br><span class="line">        <span class="type">Cursor</span> <span class="variable">res</span> <span class="operator">=</span> resolver.query(uri,column,<span class="string">&quot;id=?&quot;</span>,<span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;2&quot;</span>&#125;,<span class="literal">null</span>);</span><br><span class="line">        <span class="type">Emp</span> <span class="variable">emp</span> <span class="operator">=</span><span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">if</span> (res.moveToNext())&#123;</span><br><span class="line">            emp = <span class="keyword">new</span> <span class="title class_">Emp</span>();</span><br><span class="line">            emp.setId(res.getInt(<span class="number">0</span>));</span><br><span class="line">            emp.setName(res.getString(<span class="number">1</span>));</span><br><span class="line">            emp.setAge(res.getInt(<span class="number">2</span>));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Toast.makeText(<span class="built_in">this</span>,emp.toString(), Toast.LENGTH_SHORT).show();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//查询所有</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">findAll</span><span class="params">(View v)</span>&#123;</span><br><span class="line">        <span class="comment">//装在的容器</span></span><br><span class="line">        List&lt;Emp&gt; list=<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//创建一个内容接收者</span></span><br><span class="line">        <span class="type">ContentResolver</span> <span class="variable">resolver</span> <span class="operator">=</span> getContentResolver();</span><br><span class="line">        <span class="comment">//创建uri</span></span><br><span class="line">        <span class="type">Uri</span> <span class="variable">uri</span> <span class="operator">=</span> Uri.parse(<span class="string">&quot;content://cn.jewei.provider.emp/query&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//定义列</span></span><br><span class="line">        String[] column = <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;id&quot;</span>,<span class="string">&quot;name&quot;</span>,<span class="string">&quot;age&quot;</span>&#125;;</span><br><span class="line">        <span class="type">Cursor</span> <span class="variable">res</span> <span class="operator">=</span> resolver.query(uri,column,<span class="literal">null</span>,<span class="literal">null</span>,<span class="literal">null</span>);</span><br><span class="line">        <span class="type">Emp</span> <span class="variable">emp</span> <span class="operator">=</span><span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">while</span> (res.moveToNext())&#123;</span><br><span class="line">            emp = <span class="keyword">new</span> <span class="title class_">Emp</span>();</span><br><span class="line">            emp.setId(res.getInt(<span class="number">0</span>));</span><br><span class="line">            emp.setName(res.getString(<span class="number">1</span>));</span><br><span class="line">            emp.setAge(res.getInt(<span class="number">2</span>));</span><br><span class="line">            list.add(emp);</span><br><span class="line">        &#125;</span><br><span class="line">        Toast.makeText(<span class="built_in">this</span>, Arrays.toString(list.toArray()), Toast.LENGTH_SHORT).show();</span><br><span class="line">    &#125;&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="效果图"><a href="#效果图" class="headerlink" title="效果图"></a>效果图</h4><p><img src="http://upload-images.jianshu.io/upload_images/2648105-f3a00b8db797a3b9.gif?imageMogr2/auto-orient/strip" alt="运行效果图"></p>
<blockquote>
<p>总结：<br>  掌握好内容提供者的编写，能够更加的了解内部的机制，有助于我们更好地调用其他应用的数据，我这里没有设定任何的权限，正常来讲，我们可以自定义权限的，这时候调用者访问我们的应用中的数据就必须携带权限才可以，和系统的权限一样，没有权限你看不到，哈哈哈~</p>
</blockquote>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2024-09-02</span><i class="fa fa-tag"></i><a class="tag" href="/tags/Android/" title="Android">Android </a><a class="tag" href="/tags/Java/" title="Java">Java </a></div></div></div></div><a id="comments"></a><div id="cyReward" role="cylabs" data-use="reward"></div><script src="https://cy-cdn.kuaizhan.com/js/??lib/jquery.js,changyan.labs.https.js?appid=cyt08N8Y6"></script><div class="share"><div class="evernote"><a class="fa fa-bookmark" href="javascript:(function(){EN_CLIP_HOST='http://www.evernote.com';try{var%20x=document.createElement('SCRIPT');x.type='text/javascript';x.src=EN_CLIP_HOST+'/public/bookmarkClipper.js?'+(new%20Date().getTime()/100000);document.getElementsByTagName('head')[0].appendChild(x);}catch(e){location.href=EN_CLIP_HOST+'/clip.action?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title);}})();" ref="nofollow" target="_blank"></a></div><div class="weibo"><a class="fa fa-weibo" href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));"></a></div><div class="twitter"><a class="fa fa-twitter" href="http://twitter.com/home?status=,https://yuekang.org.cn/2024/09/02/2017021001/,少年当自强,安卓内容提供者的使用和内容接收的接收,;"></a></div></div><div class="pagination"><ul class="clearfix"><li class="pre pagbuttons"><a class="btn" role="navigation" href="/2024/09/02/2017020801/" title="我的博客开通啦">Post Anterior</a></li><li class="next pagbuttons"><a class="btn" role="navigation" href="/2020/01/04/2020010401/" title="搭建ES服务">Próximo post</a></li></ul></div><a id="comments"></a><div id="vcomments" style="margin:0 30px;"></div><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine@1.5.2/dist/Valine.min.js?v=undefined"></script><script>var valine = new Valine({
  el:'#vcomments',
  notify:false || false, 
  verify:true || false,
  app_id:'yXrP5LiEu8aLiXNMbcMkjTgk-gzGzoHsz',
  app_key:'Fb1nRCpsNrMB0U2Fv3jJSCsu',
  placeholder:'ψ(｀∇´)ψ 快说说你得想法吧！cn.gravatar.com注册专属头像',
  path: window.location.pathname,
  avatar:'',
  avatar_cdn: 'https://cravatar.cn/avatar/', // 自定义avatar cdn
  // 设置Bilibili表情包地址
  emojiCDN: '//i0.hdslb.com/bfs/emote/',
  // 表情title和图片映射
  emojiMaps: {
         "tv_doge": "6ea59c827c414b4a2955fe79e0f6fd3dcd515e24.png",
         "tv_亲亲": "a8111ad55953ef5e3be3327ef94eb4a39d535d06.png",
         "tv_偷笑": "bb690d4107620f1c15cff29509db529a73aee261.png",
         "tv_再见": "180129b8ea851044ce71caf55cc8ce44bd4a4fc8.png",
         "tv_冷漠": "b9cbc755c2b3ee43be07ca13de84e5b699a3f101.png",
         "tv_可爱": "9e55fd9b500ac4b96613539f1ce2f9499e314ed9.png",
         "tv_吐血": "09dd16a7aa59b77baa1155d47484409624470c77.png",
         "tv_呆": "fe1179ebaa191569b0d31cecafe7a2cd1c951c9d.png",
         "tv_呕吐": "9f996894a39e282ccf5e66856af49483f81870f3.png",
         "tv_困": "241ee304e44c0af029adceb294399391e4737ef2.png",
         "tv_坏笑": "1f0b87f731a671079842116e0991c91c2c88645a.png",
         "tv_大佬": "093c1e2c490161aca397afc45573c877cdead616.png",
         "tv_委屈": "d04dba7b5465779e9755d2ab6f0a897b9b33bb77.png",
         "tv_害羞": "a37683fb5642fa3ddfc7f4e5525fd13e42a2bdb1.png",
         "tv_尴尬": "7cfa62dafc59798a3d3fb262d421eeeff166cfa4.png",
         "tv_微笑": "70dc5c7b56f93eb61bddba11e28fb1d18fddcd4c.png",
         "tv_思考": "90cf159733e558137ed20aa04d09964436f618a1.png",
         "tv_惊吓": "0d15c7e2ee58e935adc6a7193ee042388adc22af.png",
         "tv_打脸": "56ab10b624063e966bfcb76ea5dc4794d87dfd47.png",
         "tv_抓狂": "fe31c08edad661d63762b04e17b8d5ae3c71a757.png",
         "tv_抠鼻": "c666f55e88d471e51bbd9fab9bb308110824a6eb.png",
         "tv_斜眼笑": "911f987aa8bc1bee12d52aafe62bc41ef4474e6c.png",
         "tv_无奈": "ea8ed89ee9878f2fece2dda0ea8a5dbfe21b5751.png",
         "tv_晕": "5443c22b4d07fb1907ccc610c8e6db254f2461b7.png",
         "tv_流汗": "cead1c351ab8d79e9f369605beb90148db0fbed3.png",
         "tv_流泪": "7e71cde7858f0cd50d74b0264aa26db612a8a167.png",
         "tv_流鼻血": "c32d39db2737f89b904ca32700d140a9241b0767.png",
         "tv_点赞": "f85c354995bd99e28fc76c869bfe42ba6438eff4.png",
         "tv_生气": "26702dcafdab5e8225b43ffd23c94ac1ff932654.png",
         "tv_生病": "8b0ec90e6b86771092a498c54f09fc94621c1900.png",
         "tv_疑问": "0793d949b18d7be716078349c202c15ff166f314.png",
         "tv_白眼": "c1d59f439e379ee50eef488bcb5e5378e5044ea4.png",
         "tv_皱眉": "72ccad6679fea0d14cce648b4d818e09b8ffea2d.png",
         "tv_目瞪口呆": "0b8cb81a68de5d5365212c99375e7ace3e7891b7.png",
         "tv_睡着": "8b196675b53af58264f383c50ad0945048290b33.png",
         "tv_笑哭": "1abc628f6d4f4caf9d0e7800878f4697abbc8273.png",
         "tv_腼腆": "89712c0d4af73e67f89e35cbc518420380a7f6f4.png",
         "tv_色": "61822c7e9aae5da76475e7892534545336b23a6f.png",
         "tv_调侃": "4bc022533ef31544ca0d72c12c808cf4a1cce3e3.png",
         "tv_调皮": "b9c41de8e82dd7a8515ae5e3cb63e898bf245186.png",
         "tv_鄙视": "6e72339f346a692a495b123174b49e4e8e781303.png",
         "tv_闭嘴": "c9e990da7f6e93975e25fd8b70e2e290aa4086ef.png",
         "tv_难过": "87f46748d3f142ebc6586ff58860d0e2fc8263ba.png",
         "tv_馋": "fc7e829b845c43c623c8b490ee3602b7f0e76a31.png",
         "tv_鬼脸": "0ffbbddf8a94d124ca2f54b360bbc04feb6bbfea.png",
         "tv_黑人问号": "45821a01f51bc867da9edbaa2e070410819a95b2.png",
         "tv_鼓掌": "1d21793f96ef4e6f48b23e53e3b9e42da833a0f6.png"
  }
})</script></div></div></div></div><script src="/js/jquery.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script></body></html>